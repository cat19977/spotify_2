(this.webpackJsonpspotify_2=this.webpackJsonpspotify_2||[]).push([[0],{33:function(t,e,s){},72:function(t,e,s){},99:function(t,e,s){"use strict";s.r(e);var a=s(2),c=s(0),r=s(22),n=s.n(r),i=s(64),l=s(13),o=s(14),u=s(23),d=s(17),j=s(16),h=(s(72),s(52)),m=s.n(h),b=s(18),p=s.n(b),O=s(24),f=s(53),x=s.n(f),v=function(t){var e=[];for(var s in t){var a=t[s],c={name:a.name,genres:a.genres,popularity:a.popularity};e.push(c)}return JSON.stringify(e)},g=function(t){var e=[];for(var s in t){var a=t[s],c={name:a.name,popularity:a.popularity,id:a.id,duration:a.duration_ms,artist:a.artists[0].name,release_date:a.album.release_date,img:a.album.images[0].url,album:a.album.name,uri:a.uri};e.push(c)}return JSON.stringify(e)},y=function(){var t=Object(O.a)(p.a.mark((function t(e,s){var a,c,r,n;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=localStorage.getItem("token"),c="Bearer ".concat(a),r=s.concat("_",e),t.prev=3,n="https://api.spotify.com/v1/me/top/".concat(s,"?time_range=").concat(e,"_term&limit=50"),x.a.get(n,{headers:{Authorization:c}}).then((function(t){"artists"===s?localStorage.setItem(r,v(t.data.items)):localStorage.setItem(r,g(t.data.items))})),t.next=13;break;case 8:return t.prev=8,t.t0=t.catch(3),console.log("error",t.t0),console.log("didnt"),t.abrupt("return",null);case 13:case"end":return t.stop()}}),t,null,[[3,8]])})));return function(e,s){return t.apply(this,arguments)}}(),k=s(38),_=s(19),S=s(62),N=s(63),I=s(116),C=(s(33),function(t){Object(d.a)(s,t);var e=Object(j.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).onClickk=function(t){var e=Number(t.currentTarget.id);a.state.previously_clicked&&(a.state.previously_clicked.style.color="white"),t.target.style.color="green",a.setState({idx:e,play:!0,previously_clicked:t.target}),console.log(e)},a.state={table_data:null,uri_data:null,idx:0,play:!1,previously_clicked:null},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){console.log(this.props.term);for(var t=function(t){var e="tracks".concat("_",String(t)),s=JSON.parse(localStorage.getItem(e)),a=[],c=[],r=[],n=[],i=[],l=[];for(var o in s){var u=s[o];a.push(u.name),c.push(u.artist),r.push(u.img),n.push(u.album),i.push(u.popularity),l.push(u.uri)}return{titles:a,artists:c,img_url:r,album:n,popularity:i,uri:l}}(this.props.term),e=[],s=0;s<t.titles.length;s++)e.push(Object(a.jsxs)("tr",{className:"th1",style:{textAlign:"left"},children:[Object(a.jsx)("td",{className:"td1",children:Object(a.jsx)("button",{className:"play_btn",id:String(s),onClick:this.onClickk,children:Object(a.jsx)(I.a,{})})}),Object(a.jsx)("td",{className:"td1",children:t.titles[s]}),Object(a.jsx)("td",{className:"td1",children:t.artists[s]}),Object(a.jsx)("td",{className:"td1",children:t.album[s]}),Object(a.jsx)("td",{className:"td1",children:t.popularity[s]})]},s));this.setState({table_data:e}),this.setState({uri_data:t.uri})}},{key:"render",value:function(){if(this.state.uri_data)var t=this.state.uri_data,e=this.state.idx;return Object(a.jsxs)("div",{className:"player_container",children:[Object(a.jsx)("table",{className:"table1",style:{alignItems:"center"},children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{className:"tr1",children:[Object(a.jsx)("th",{className:"th1",style:{textAlign:"left"}}),Object(a.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Title"}),Object(a.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Artist"}),Object(a.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Album"}),Object(a.jsx)("th",{className:"th1",style:{textAlign:"left"},children:"Popularity"})]}),this.state.table_data]})}),Object(a.jsx)("div",{className:"web_player",children:Object(a.jsx)(N.a,{token:localStorage.getItem("token"),uris:t,offset:e,play:this.state.play,styles:{activeColor:"#fff",bgColor:"#333",color:"#fff",loaderColor:"#fff",sliderColor:"#1cb954",trackArtistColor:"#ccc",trackNameColor:"#fff"}})})]})}}]),s}(c.Component)),A=function(t){var e=t.on_Select;return Object(a.jsxs)(S.a,{variant:"success",title:"Top Songs",id:"dropdown-menu-align-right",onSelect:e,children:[Object(a.jsx)(_.a.Item,{eventKey:"short",children:"Short Term"}),Object(a.jsx)(_.a.Item,{eventKey:"medium",children:"Medium Term"}),Object(a.jsx)(_.a.Item,{eventKey:"long",children:"All Time"})]})},w=function(t){var e=t.term,s="tracks".concat("_",String(e)),c=JSON.parse(localStorage.getItem(s)),r=[],n=[],i=[],l=[],o=[];for(var u in c){var d=c[u];r.push(d.name),n.push(d.artist),i.push(d.img),l.push(d.album),o.push(d.popularity)}var j=i.map((function(t,e){return Object(a.jsxs)("ul",{class:"img-item",children:[Object(a.jsx)("img",{className:"albums",src:t},e),Object(a.jsxs)("div",{class:"details",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("a",{class:"title",children:r[e]})}),Object(a.jsx)("p",{class:"artist",children:n[e]})]})]})}));return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{class:"column",children:j.slice(0,10)}),Object(a.jsx)("div",{class:"column",children:j.slice(10,20)}),Object(a.jsx)("div",{class:"column",children:j.slice(20,30)}),Object(a.jsx)("div",{class:"column",children:j.slice(30,40)}),Object(a.jsx)("div",{class:"column",children:j.slice(40,50)})]})},T=function(){var t=Object(c.useState)("short"),e=Object(k.a)(t,2),s=e[0],r=e[1],n=Object(c.useState)("img"),i=Object(k.a)(n,2),l=i[0],o=i[1];return Object(a.jsxs)("div",{className:"dash",children:[Object(a.jsxs)("div",{className:"menu",children:[Object(a.jsx)(A,{className:"drop",on_Select:function(t){r(t),o("img")}}),Object(a.jsx)("button",{class:"btn btn-outline-success",onClick:function(t){console.log("clicked"),o("table")},type:"submit",children:"Web Player"}),Object(a.jsx)("button",{class:"btn btn-outline-success",type:"submit",children:"To Playlist"})]}),Object(a.jsx)("div",{className:"contents",children:"img"===l?Object(a.jsx)(w,{term:s}):Object(a.jsx)(C,{term:s})})]})},J=function(t){Object(d.a)(s,t);var e=Object(j.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).getInitialData=Object(O.a)(p.a.mark((function t(){var e,s,a,c,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a in e=[],s=["artists_short","artists_medium","artists_long","tracks_short","tracks_medium","tracks_long"])c=s[a].split("_")[1],r=s[a].split("_")[0],e.push(y(c,r));Promise.all(e).then(console.log("done"));case 4:case"end":return t.stop()}}),t)}))),a.state={isLoaded:!1},a}return Object(o.a)(s,[{key:"componentDidMount",value:function(){this.getInitialData().then(this.setState({isLoaded:!0}))}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"home",children:this.state.isLoaded?Object(a.jsx)(T,{}):Object(a.jsx)("p",{children:"Loading..."})})}}]),s}(c.Component),D=function(t){var e=t.onSuccess;return Object(a.jsx)(m.a,{clientId:"d9dca95c2ee54a54b35c890972268f0a",redirectUri:"http://localhost:3000/spotify_2",scope:"user-top-read user-library-read user-read-recently-played streaming user-read-email user-read-private user-read-playback-state user-modify-playback-state",onSuccess:e,onFailure:function(t){return console.error(t)}})},L=function(t){Object(d.a)(s,t);var e=Object(j.a)(s);function s(t){var a;return Object(l.a)(this,s),(a=e.call(this,t)).onSuccess=function(t){console.log(t),a.setState({token:!0}),localStorage.setItem("token",t.access_token)},a.state={token:!1},a.onSuccess=a.onSuccess.bind(Object(u.a)(a)),a}return Object(o.a)(s,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"App",children:this.state.token?Object(a.jsx)(J,{token:this.state.token}):Object(a.jsx)(D,{onSuccess:this.onSuccess})})}}]),s}(c.Component);s(48),s(97),s(49);n.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(L,{})}),document.getElementById("root"))}},[[99,1,2]]]);
//# sourceMappingURL=main.6f46c51c.chunk.js.map