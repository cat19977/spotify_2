(this.webpackJsonpspotify_2=this.webpackJsonpspotify_2||[]).push([[0],{58:function(e,t,n){},78:function(e,t,n){},85:function(e,t,n){"use strict";n.r(t);var s=n(3),c=n(0),r=n(16),a=n.n(r),i=n(51),o=n(17),l=n(18),u=n(19),d=n(27),j=n(25),m=(n(58),n(47)),h=n.n(m),p=n(12),b=n.n(p),O=n(20),v=n(48),f=n.n(v),g=function(e){var t=[];for(var n in e){var s=e[n],c={name:s.name,genres:s.genres,popularity:s.popularity};t.push(c)}return JSON.stringify(t)},x=function(e){var t=[];for(var n in e){var s=e[n],c={name:s.name,popularity:s.popularity,id:s.id,duration:s.duration_ms,artist:s.artists[0].name,release_date:s.album.release_date,img:s.album.images[0].url};t.push(c)}return JSON.stringify(t)},S=function(){var e=Object(O.a)(b.a.mark((function e(t,n){var s,c,r,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s=localStorage.getItem("token"),c="Bearer ".concat(s),r=n.concat("_",t),e.prev=3,a="https://api.spotify.com/v1/me/top/".concat(n,"?time_range=").concat(t,"_term&limit=50"),f.a.get(a,{headers:{Authorization:c}}).then((function(e){"artists"===n?localStorage.setItem(r,g(e.data.items)):localStorage.setItem(r,x(e.data.items))})),e.next=13;break;case 8:return e.prev=8,e.t0=e.catch(3),console.log("error",e.t0),console.log("didnt"),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[3,8]])})));return function(t,n){return e.apply(this,arguments)}}(),y=n(52),_=n(13),k=n(49),I=(n(78),function(e){var t=e.on_Select;return Object(s.jsxs)(k.a,{alignRight:!0,title:"Top Songs",id:"dropdown-menu-align-right",onSelect:t,children:[Object(s.jsx)(_.a.Item,{eventKey:"short",children:"Short Term"}),Object(s.jsx)(_.a.Item,{eventKey:"medium",children:"Medium Term"}),Object(s.jsx)(_.a.Item,{eventKey:"long",children:"All Time"})]})}),w=function(e){var t=e.term,n="tracks".concat("_",String(t)),c=JSON.parse(localStorage.getItem(n)),r=[],a=[],i=[];for(var o in c){var l=c[o];r.push(l.name),a.push(l.artist),i.push(l.img)}var u=i.map((function(e,t){return Object(s.jsxs)("ul",{class:"img-item",children:[Object(s.jsx)("img",{className:"albums",src:e},t),Object(s.jsxs)("div",{class:"details",children:[Object(s.jsx)("h3",{children:Object(s.jsx)("a",{class:"title",children:r[t]})}),Object(s.jsx)("p",{class:"artist",children:a[t]})]})]})}));return Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{class:"column",children:u.slice(0,10)}),Object(s.jsx)("div",{class:"column",children:u.slice(10,20)}),Object(s.jsx)("div",{class:"column",children:u.slice(20,30)}),Object(s.jsx)("div",{class:"column",children:u.slice(30,40)}),Object(s.jsx)("div",{class:"column",children:u.slice(40,50)})]})},N=function(){var e=Object(c.useState)("short"),t=Object(y.a)(e,2),n=t[0],r=t[1];return Object(s.jsxs)("div",{children:[Object(s.jsx)(I,{on_Select:function(e){r(e)}}),Object(s.jsx)(w,{term:n})]})},J=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).getInitialData=Object(O.a)(b.a.mark((function e(){var t,n,s,c,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(s in t=[],n=["artists_short","artists_medium","artists_long","tracks_short","tracks_medium","tracks_long"])c=n[s].split("_")[1],r=n[s].split("_")[0],t.push(S(c,r));Promise.all(t).then(console.log("done"));case 4:case"end":return e.stop()}}),e)}))),s.state={isLoaded:!1},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getInitialData().then(this.setState({isLoaded:!0}))}},{key:"render",value:function(){return Object(s.jsx)("div",{className:"Home",children:this.state.isLoaded?Object(s.jsx)(N,{}):Object(s.jsx)("p",{children:"Loading..."})})}}]),n}(c.Component),L=function(e){var t=e.onSuccess;return Object(s.jsx)(h.a,{clientId:"d9dca95c2ee54a54b35c890972268f0a",redirectUri:"https://cat19977.github.io/spotify_2/",scope:"user-top-read user-library-read user-read-recently-played",onSuccess:t,onFailure:function(e){return console.error(e)}})},T=function(e){Object(d.a)(n,e);var t=Object(j.a)(n);function n(e){var s;return Object(o.a)(this,n),(s=t.call(this,e)).onSuccess=function(e){console.log(e),s.setState({token:!0}),localStorage.setItem("token",e.access_token)},s.state={token:!1},s.onSuccess=s.onSuccess.bind(Object(u.a)(s)),s}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsx)("div",{className:"App",children:this.state.token?Object(s.jsx)(J,{token:this.state.token}):Object(s.jsx)(L,{onSuccess:this.onSuccess})})}}]),n}(c.Component);n(42),n(82),n(43);a.a.render(Object(s.jsx)(i.a,{children:Object(s.jsx)(T,{})}),document.getElementById("root"))}},[[85,1,2]]]);
//# sourceMappingURL=main.ae5dc3ab.chunk.js.map